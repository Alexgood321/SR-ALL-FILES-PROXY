#!name=SR-ALL-FILES-PROXY Base Config
#!desc=Конфигурация с DoH, hijack-dns, автообновлением списков и моим VoIP-листом.

[General]
# Автообновление этого конфига (RAW-ссылка на этот файл в твоём репо):
update-url = https://raw.githubusercontent.com/Alexgood321/SR-ALL-FILES-PROXY/main/config/remote.conf

# Системные обходы и исключения для TUN
bypass-system = true
skip-proxy = 127.0.0.1, localhost, *.local, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32

# Сеть
ipv6 = false

# DNS hijack (перехват DNS-запросов и отправка их через прокси)
hijack-dns = 1.1.1.1:53,8.8.8.8:53,8.8.4.4:53,9.9.9.9:53,94.140.14.14:53,208.67.222.222:53,1.0.0.1:53

[DNS]
# Основные DoH-сервера
server = https://dns.cloudflare.com/dns-query
server = https://dns.google/dns-query

# Фоллбэк обычные DNS
dns-server = 1.1.1.1,8.8.8.8

[Host]
# Переопределений нет (можно добавить при необходимости)

[Proxy Group]
# Группа прокси для правил (выбираешь руками в UI)
PROXY = select, DIRECT

[Rule]
# --- Мой VoIP-лист (из SR-ALL-FILES-PROXY, jsDelivr, автообновление раз в сутки) ---
RULE-SET,https://cdn.jsdelivr.net/gh/Alexgood321/SR-ALL-FILES-PROXY@main/rules/voip-pack.list,PROXY,update-interval=60

# --- Остальные списки ---
RULE-SET,https://raw.githubusercontent.com/misha-tgshv/shadowrocket-configuration-file/main/rules/domains_antifilter.list,PROXY,update-interval=14400
RULE-SET,https://raw.githubusercontent.com/misha-tgshv/shadowrocket-configuration-file/main/proxy.list,PROXY,update-interval=14400
RULE-SET,https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-easylist.txt,REJECT,update-interval=14400

# --- Гео и финальное правило ---
GEOIP,RU,DIRECT
FINAL,DIRECT

[URL Rewrite]
# Редирект Яндекса на ya.ru
^http://(www\.)?yandex\.ru https://www.ya.ru 302
